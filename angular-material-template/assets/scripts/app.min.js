!function(){"use strict";function e(e,r,t,n){r.otherwise("/login"),e.setPrefix("myApp"),n.interceptors.push("TokenInterceptor"),t.theme("default").primaryPalette("blue")}function r(e){return{request:function(r){var t=e.getToken();return t&&(r.headers.Authorization=t),r}}}e.$inject=["localStorageServiceProvider","$urlRouterProvider","$mdThemingProvider","$httpProvider"],r.$inject=["StorageManager"],angular.module("myApp",["myApp.login","myApp.dashboard"]).config(e).factory("TokenInterceptor",r)}(),function(){"use strict";angular.module("myApp.shared",["LocalStorageModule","pascalprecht.translate","ngSanitize"])}(),function(){"use strict";angular.module("myApp.dashboard",["ui.router","ngMaterial","ngMdIcons","myApp.shared"])}(),function(){"use strict";angular.module("myApp.login",["ui.router","ngMaterial","ngMdIcons","myApp.shared"])}(),function(){"use strict";function e(e,t){e.state("dashboard",{"abstract":!0,url:"/dashboard",templateUrl:"app/dashboard/dashboard.html",controllerAs:"vm",controller:"DashboardCtrl",resolve:r.resolve})}function r(e,r,n,o){var a=this;a.userinfo=o.getUser(),a.userinfo.isRoot="admin"===a.userinfo.usertype,a.logout=function(){o.deleteToken(),o.deleteUser(),o.deleteProject(),o.deleteAutoLogin(),r.go("login")},a.isActive=function(r){return e.path().indexOf(r)>-1},a.modifyUser=function(e){n.show({controller:t,controllerAs:"vm",templateUrl:"modifyUser.html",targetEvent:e,resolve:{data:function(){return a.userinfo}}}).then(function(){},function(){})}}function t(e,r,t,n,o){var a,i=this;i.name=n.username,i.email=n.email,i.desc="",i.confirmProfile=function(){if(r.cancel(a),i.name)if(i.desc){var t={user_name:i.name,email:i.email};o.modifyUserProfile(n.user_id,t,function(){e.cancel()})}else i.errorMsgProfile="DashBoard_RequireClientDesc";else i.errorMsgProfile="DashBoard_RequireClientName";a=r(function(){i.errorMsgProfile=""},5e3)},i.confirmPassword=function(){if(r.cancel(a),i.oldpass)if(i.newpass)if(i.renewpass)if(i.newpass!==i.renewpass)i.errorMsgPassword="DashBoard_ModifyPwdDiffer";else{var t={old_password:i.oldpass,new_password:i.newpass};o.modifyPassword(n.user_id,t,function(){e.cancel()})}else i.errorMsgPassword="DashBoard_RequireReNewPassword";else i.errorMsgPassword="DashBoard_RequireNewPassword";else i.errorMsgPassword="DashBoard_RequireOldPassword";a=r(function(){i.errorMsgPassword=""},5e3)},i.cancel=function(){e.cancel()}}e.$inject=["$stateProvider","$httpProvider"],r.$inject=["$location","$state","$mdDialog","StorageManager"],r.resolve={checkLoggedIn:["$q","$http","$state","$location","Constant",function(e,r,t,n,o){var a=e.defer();return a.resolve(),a.promise}],initData:["$translate","StorageManager","checkLoggedIn",function(e,r,t){var n=r.getLang()||"cn";e.use(n)}]},t.$inject=["$mdDialog","$timeout","$window","data","DashboardService"],angular.module("myApp.dashboard").controller("DashboardCtrl",r).config(e)}(),function(){"use strict";function e(e,r){var t={};return t.modifyUserProfile=function(e,r,t){t()},t.modifyPassword=function(e,r,t){t()},t}e.$inject=["$http","Util"],angular.module("myApp.dashboard").factory("DashboardService",e)}(),function(){"use strict";function e(e,r,t,n,o,a){var i=this;i.lang=n.lang,i.langChanged=function(){o.setLang(i.lang),a.use(i.lang)},i.email="",i.password="",i.errorMsg="",i.login=function(e,r){if(e){var n={email:i.email,password:i.password};t.login(n,r,i.autoLogin)}},r(function(){t.autoLogin()},50)}function r(r){r.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginCtrl",controllerAs:"vm",resolve:e.resolve})}e.$inject=["$state","$timeout","LoginService","initData","StorageManager","$translate"],r.$inject=["$stateProvider"],e.resolve={initData:["$translate","StorageManager",function(e,r){var t=r.getLang()||"cn";return e.use(t),{lang:t}}]},angular.module("myApp.login").controller("LoginCtrl",e).config(r)}(),function(){"use strict";function e(e,r,t,n,o,a,i){var s={};return s.login=function(e,n,a){var i=t.defer();return o.setAutoLogin(a||!1),o.setUser({userid:"1024",username:"Admin",email:"admin@admin.com",usertype:"admin"}),i.resolve(),r.go("dashboard.first"),i.promise},s.autoLogin=function(){var e=o.getAutoLogin();if(e){var n=t.defer();return n.resolve(),r.go("dashboard.first"),n.promise}},s}e.$inject=["$http","$state","$q","$window","StorageManager","Constant","Util"],angular.module("myApp.login").factory("LoginService",e)}(),function(){"use strict";var e="http://localhost:4000/";angular.module("myApp.shared").constant("Constant",{URL:{LOGIN:e+"auth/login",CHECK_LOGIN:e+"auth/loggedin",USERS:e+"users",PROJECTS:e+"projects"}})}(),function(){"use strict";function e(e,r){e.useSanitizeValueStrategy(null),e.useLoader("$translatePartialLoader",{urlTemplate:"assets/translation/{lang}/lang.json"}),e.preferredLanguage("en"),r.addPart("login"),r.addPart("dashboard")}angular.module("myApp.shared").config(e),e.$inject=["$translateProvider","$translatePartialLoaderProvider"]}(),function(){"use strict";function e(e){var r={};return r.setToken=function(t){return r.deleteToken(),e.set("myAppToken",t)},r.getToken=function(){return e.get("myAppToken")},r.deleteToken=function(){return e.remove("myAppToken")},r.setUser=function(r){return e.set("myAppUser",r)},r.getUser=function(){return e.get("myAppUser")},r.deleteUser=function(){return e.remove("myAppUser")},r.setAutoLogin=function(r){return e.set("myAppAutoLogin",r)},r.getAutoLogin=function(){return e.get("myAppAutoLogin")},r.deleteAutoLogin=function(){return e.remove("myAppAutoLogin")},r.setPath=function(r){return e.set("myAppPath",r)},r.getPath=function(){return e.get("myAppPath")},r.deletePath=function(){return e.remove("myAppPath")},r.setLang=function(r){return e.set("myAppLang",r)},r.getLang=function(){return e.get("myAppLang")},r.deleteLang=function(){return e.remove("myAppLang")},r.setProject=function(r){return e.set("myAppProject",r)},r.getProject=function(){return e.get("myAppProject")},r.deleteProject=function(){return e.remove("myAppProject")},r}e.$inject=["localStorageService"],angular.module("myApp.shared").factory("StorageManager",e)}(),function(){"use strict";function e(e,r){var t={};return t.showError=function(t){e("Error"+t).then(function(e){r.show(r.simple().content(e).position("right top").hideDelay(3e3))})},t.unique=function(e){var r={},t=[];return e.forEach(function(e){r[e.id]||(t.push(e),r[e.id]=!0)}),t},t}angular.module("myApp.shared").factory("Util",e),e.$inject=["$translate","$mdToast"]}(),function(){"use strict";function e(e){e.state("dashboard.first",{url:"/first",templateUrl:"app/dashboard/first/first.html",controllerAs:"vm",controller:"FirstCtrl",resolve:r.resolve})}function r(e){}e.$inject=["$stateProvider"],r.$inject=["initData"],r.resolve={initData:function(){return!0}},angular.module("myApp.dashboard").controller("FirstCtrl",r).config(e)}(),function(){"use strict";function e(){var e={};return e}angular.module("myApp.dashboard").factory("FirstService",e)}(),function(){"use strict";function e(e){e.state("dashboard.second",{url:"/second",templateUrl:"app/dashboard/second/second.html",controllerAs:"vm",controller:"SecondCtrl",resolve:r.resolve})}function r(){}e.$inject=["$stateProvider"],r.resolve={initData:function(){return!0}},angular.module("myApp.dashboard").controller("SecondCtrl",r).config(e)}(),function(){"use strict";function e(e){var r={};return r}e.$inject=["$q"],angular.module("myApp.dashboard").factory("SecondService",e)}();